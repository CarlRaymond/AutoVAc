Version 4
SHEET 1 2052 736
WIRE 608 16 592 16
WIRE 784 16 768 16
WIRE 592 48 592 16
WIRE 160 64 144 64
WIRE -16 80 -32 80
WIRE 768 80 768 16
WIRE 816 80 768 80
WIRE -32 96 -32 80
WIRE 144 96 144 64
WIRE 192 96 144 96
WIRE -480 128 -512 128
WIRE -448 128 -480 128
WIRE -96 128 -112 128
WIRE -304 144 -320 144
WIRE -512 160 -512 128
WIRE -448 160 -448 128
WIRE -320 160 -320 144
WIRE -112 160 -112 128
WIRE -112 160 -208 160
WIRE -32 160 -112 160
WIRE 32 160 -32 160
WIRE 592 160 592 128
WIRE 816 160 816 144
WIRE 592 176 592 160
WIRE 688 176 592 176
WIRE 768 176 768 80
WIRE 32 208 32 160
WIRE 64 208 32 208
WIRE 144 208 144 96
WIRE 224 208 208 208
WIRE 432 208 416 208
WIRE 848 208 816 208
WIRE 912 208 848 208
WIRE -208 224 -208 160
WIRE -112 224 -112 160
WIRE 208 240 208 208
WIRE 208 240 192 240
WIRE 224 240 208 240
WIRE 304 240 288 240
WIRE 320 240 304 240
WIRE 416 240 416 208
WIRE 416 240 400 240
WIRE 480 240 416 240
WIRE 688 240 480 240
WIRE 912 240 912 208
WIRE -512 256 -512 240
WIRE -480 256 -512 256
WIRE -448 256 -448 240
WIRE -448 256 -480 256
WIRE -320 256 -320 240
WIRE 768 256 768 240
WIRE -480 272 -480 256
WIRE 64 272 32 272
WIRE 416 272 416 240
WIRE 480 272 480 240
WIRE 144 304 144 272
WIRE -112 320 -112 304
WIRE 592 336 592 176
WIRE 688 336 592 336
WIRE 848 336 848 208
WIRE 848 336 768 336
WIRE -448 352 -512 352
WIRE 32 352 32 272
WIRE 80 352 32 352
WIRE 208 352 144 352
WIRE 304 352 304 240
WIRE 304 352 208 352
WIRE -512 368 -512 352
WIRE -448 368 -448 352
WIRE -256 368 -272 368
WIRE -272 384 -272 368
WIRE 416 384 416 336
WIRE 448 384 416 384
WIRE 480 384 480 352
WIRE 480 384 448 384
WIRE 592 384 592 336
WIRE -208 432 -208 304
WIRE -112 432 -112 400
WIRE -112 432 -208 432
WIRE -80 432 -112 432
WIRE 32 432 32 352
WIRE 32 432 0 432
WIRE 80 432 32 432
WIRE 208 432 208 352
WIRE 208 432 160 432
WIRE -320 448 -336 448
WIRE -512 464 -512 448
WIRE -480 464 -512 464
WIRE -448 464 -448 448
WIRE -448 464 -480 464
WIRE -480 480 -480 464
WIRE -336 480 -336 448
WIRE -304 480 -336 480
WIRE -272 480 -272 464
WIRE -272 480 -304 480
WIRE -112 480 -112 432
WIRE -112 480 -272 480
WIRE 448 480 448 384
WIRE 592 480 592 464
WIRE -304 512 -304 480
FLAG -320 256 0
FLAG 144 304 0
FLAG 768 256 0
FLAG 912 208 Vout
FLAG 208 208 Vstage1
FLAG -320 144 Vcc
FLAG 592 16 Vcc
FLAG 768 16 Vcc
FLAG 592 160 Vcomp
FLAG 416 208 Vcap
FLAG -480 272 0
FLAG -480 128 Vswitch
FLAG -480 480 0
FLAG -112 128 Vsense
FLAG 192 160 0
FLAG 816 160 0
FLAG 144 64 Vcc
FLAG 592 480 0
FLAG 448 480 0
FLAG -112 544 0
FLAG -272 544 0
FLAG -272 368 Vcc
FLAG -336 448 Vref
FLAG -32 224 0
FLAG -32 80 Vcc
FLAG 912 304 0
SYMBOL res -128 208 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL MCP6001 64 240 R0
WINDOW 3 6 -114 Top 2
SYMATTR InstName U1
SYMBOL voltage -320 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -78 -33 Left 2
SYMATTR SpiceLine Rser=.2 Cpar=10u
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res 16 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1.5K
SYMBOL res 176 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1Meg
SYMBOL MCP6001 688 208 R0
WINDOW 3 5 -117 Top 2
SYMATTR InstName U2
SYMBOL polcap 400 272 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 100µ
SYMATTR InstName C3
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=12.5 Irms=2.21565 Rser=0.055 Lser=0
SYMBOL diode 224 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 464 256 R0
SYMATTR InstName R5
SYMATTR Value 47K
SYMBOL res 416 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 470
SYMBOL res 576 32 R0
SYMATTR InstName R9
SYMATTR Value 10K
SYMBOL res 784 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 150K
SYMBOL res 576 368 R0
SYMATTR InstName R12
SYMATTR Value 39K
SYMBOL voltage -512 144 R0
WINDOW 3 -65 159 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 0.25 0.001 0.002 2 5)
SYMATTR InstName V3
SYMBOL res -464 144 R0
SYMATTR InstName R13
SYMATTR Value 1K
SYMBOL bi -208 224 R0
WINDOW 3 51 -46 VRight 2
SYMATTR Value I=V(Vswitch) * I(I1)
SYMATTR InstName B1
SYMBOL current -512 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -30 137 Left 2
SYMATTR Value SINE(0 0.0005 60)
SYMATTR InstName I1
SYMBOL res -464 352 R0
SYMATTR InstName R14
SYMATTR Value 1K
SYMBOL cap 176 96 R0
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL cap 800 80 R0
SYMATTR InstName C6
SYMATTR Value 0.1µ
SYMBOL cap -128 480 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL ZZZ\\REF\\TL431 -288 480 R0
WINDOW 3 38 35 Left 2
SYMATTR InstName U4
SYMBOL res -288 368 R0
SYMATTR InstName R15
SYMATTR Value 220
SYMBOL diode -16 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -54 55 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -16 224 R180
WINDOW 0 35 36 Left 2
WINDOW 3 -32 -24 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL cap 896 240 R0
SYMATTR InstName C7
SYMATTR Value 0.1µ
SYMBOL bv -112 304 R0
WINDOW 3 83 214 Left 2
SYMATTR Value V=white(2e3*time) / 100
SYMATTR InstName Bnoise
SYMBOL cap 144 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 1n
TEXT 16 584 Left 2 !.tran 0 10 0 startup
